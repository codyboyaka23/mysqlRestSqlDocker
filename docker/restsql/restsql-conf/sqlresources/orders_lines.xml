<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ns2:sqlResource xmlns:ns2="http://restsql.org/schema">
    <query>
		SELECT orders.active AS orderStatus, 
        orders.id AS orderID, 
        orders.created_at AS orderCreatedAt, 
        orders.updated_at AS orderUpdatedAt,
        companies.name AS company, 
        companies.code AS companyCode, 
        orders_lines.id AS ID, 
        orders_lines.updated_at AS lastUpdate, 
        products.name AS product, 
        orders_lines.qty , 
        measure_unit.code AS measureUnit, 
        products.price,
        (orders_lines.qty * products.price) AS lineTotal
        FROM orders_lines
        JOIN orders ON orders.id = orders_lines.order_id
        JOIN companies ON companies.id = orders.company_id 
        JOIN products ON products.id = orders_lines.id
        JOIN measure_unit ON measure_unit.id = products.measure_unit
	</query>
    <metadata>
        <database default="mysql_rest_sql_docker"/>
        <table name="orders_lines" role="Parent" rowSetAlias="orderLines" />
        <table name="orders" role="ParentExtension"/>
        <table name="companies" role="ParentExtension"/>
        <table name="products" role="ParentExtension" />
        <table name="measure_unit" role="ParentExtension" />
    </metadata>
</ns2:sqlResource>

<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ns2:sqlResource xmlns:ns2="http://restsql.org/schema">
    <query>
		SELECT orders_lines.id AS orderLineID, 
        orders.id AS orderID, orders.active, 
        companies.name AS company, 
        products.name AS product , 
        products.price,
        orders_lines.qty, 
        measure_unit.code AS measureUnit,  
        (orders_lines.qty * products.price) AS total
        FROM orders_lines
        JOIN orders ON orders_lines.order_id = orders.id 
        JOIN companies ON orders.company_id = companies.id
        JOIN products ON products.id = orders_lines.product_id
        JOIN measure_unit ON measure_unit.id = products.measure_unit
	</query>
    <metadata>
        <database default="mysql_rest_sql_docker"/>
        <table name="orders_lines" role="Parent" rowSetAlias="orderLines"/>
        <table name="orders" role="ParentExtension"/>
        <table name="companies" role="ParentExtension"/>
        <table name="products" role="ParentExtension"/>
        <table name="measure_unit" role="ParentExtension"/>
    </metadata>
</ns2:sqlResource>
